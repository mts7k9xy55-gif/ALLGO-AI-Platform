<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Blackhole</title>
<style>
body { font-family: system-ui; background:#0e0e11; color:#eee; padding:20px; }
textarea { width:100%; height:120px; background:#1b1b22; color:#eee; border:0; padding:10px; border-radius:8px; }
button { margin-top:10px; padding:8px 14px; border:0; border-radius:6px; background:#3a6bff; color:white; cursor:pointer; }
#reply { margin-top:15px; opacity:0.9; }
</style>
</head>
<body>

<h2>ALLGOAI Blackhole</h2>
<textarea id="prompt" placeholder="作りたいアプリを自然文で書く"></textarea>
<button onclick="sendPrompt()">Generate</button>
<div id="reply"></div>

<script>
const API = "https://YOUR-WORKER-URL.workers.dev";

let specState = {};

async function sendPrompt(){
  const msg = document.getElementById("prompt").value;
  document.getElementById("prompt").value = "";

  const res = await fetch(API+"/llm",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({
      message: msg,
      spec: specState
    })
  }).then(r=>r.json());

  document.getElementById("reply").innerText = res.reply || "";

  if(res.spec) specState = res.spec;

  if(res.saved){
    location.href = "earth.html";
  }
}
</script>

</body>
</html>
