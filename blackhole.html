<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Blackhole</title>
<style>
body{margin:0;background:#0e0e11;color:#eee;font-family:system-ui;padding:40px;text-align:center}
textarea{width:80%;max-width:760px;height:160px;background:#1b1b22;color:#eee;border:0;border-radius:12px;padding:14px;font-size:15px}
button{margin-top:14px;background:#3a6bff;color:#fff;border:0;border-radius:10px;padding:10px 18px;cursor:pointer}
#reply{margin-top:18px;opacity:.9}
</style>
</head>
<body>
<h1>Blackhole</h1>
<textarea id="prompt" placeholder="作りたいアプリを自然文で書く"></textarea><br/>
<button onclick="sendPrompt()">Generate</button>
<div id="reply"></div>

<script type="module">
import { createFromPrompt } from "./util.js";

async function sendPrompt(){
  const msg = document.getElementById("prompt").value.trim();
  if(!msg) return;
  document.getElementById("reply").innerText = "working...";
  const res = await createFromPrompt(msg);
  document.getElementById("reply").innerText = res.reply || res.error || "done";
  if(res.saved) setTimeout(()=>location.href="earth.html", 600);
}
window.sendPrompt = sendPrompt;
</script>
</body>
</html>
